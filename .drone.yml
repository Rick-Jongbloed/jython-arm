kind: pipeline
name: jython-arm

steps:
- name: clone-jython
  image: drone/git
  commands:
  - git clone https://github.com/jythontools/jython

- name: build-jython-prepare
  image: arm32v7/openjdk:7
  commands:
  - apt update
  - apt -y install ant
  - cd jython
  - ant prepare

- name: build-jython-jar-standalone
  image: arm32v7/openjdk:7
  commands:
  - apt update
  - apt -y install ant
  - cd jython
  - ant jar-standalone
  - ls -laR ./dist

- name: build-jython-javadoc
  image: arm32v7/openjdk:7
  commands:
  - apt update
  - apt -y install ant
  - cd jython
  - ant javadoc
  - ls -laR ./dist

- name: build-jython-installer
  image: arm32v7/openjdk:7
  commands:
  - apt update
  - apt -y install ant
  - cd jython
  - ant installer
  - ls -laR ./dist

- name: build-jython-installer
  image: arm32v7/openjdk:7
  commands:
  - apt update
  - apt -y install ant
  - cd jython
  - ant all-jars
  - ls -laR ./dist

# - name: publish-jython
#   image: plugins/github-release
#   settings:
#     api_key: xxxxxxxx
#     files:
#       - dist/*
#       - bin/binary.exe
#    checksum:
#       - sha512
#   when:
#     event: tag